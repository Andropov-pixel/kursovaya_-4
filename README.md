# Сервис управления рассылками (Django)

## О проекте

Веб-приложение для управления email-рассылками с возможностью:
- Добавления клиентов и сообщений.
- Настройки рассылок с гибким расписанием.
- Отслеживания статистики отправок.
- Разграничения прав доступа (пользователи/менеджеры).

Целевая аудитория: маркетологи, владельцы малого бизнеса.

## Технологии

- Backend: Django 4.2, Django REST Framework
- Frontend: HTML, Bootstrap 5
- База данных: PostgreSQL
- Кеширование: Redis
- Виртуальное окружение: Poetry

## Установка

1. Клонирование репозитория 
    ```bash
    git clone https://github.com/Andropov-pixel/kursovaya_-4
    cd kursovaya_-4
    ```
   
2. Инициализация Poetry
    ```bash
    poetry install
    poetry shell
   ```

## Запуск проекта

```bash
# Применить миграции
poetry run python manage.py migrate

# Создать суперпользователя
poetry run python manage.py createsuperuser

# Запустить сервер
poetry run python manage.py runserver
```

## Функциональность
### Часть 1
- Управление клиентами - CRUD для получателей рассылок.
- Сообщения - Создание шаблонов писем.
- Рассылки - Настройка времени отправки, выбор получателей. Статусы: "Создана", "Запущена", "Завершена".
- Попытки рассылок - Логирование результатов каждой отправки.
- Главная страница - Статистика по активным рассылкам и клиентам.

### Часть 2
- Аутентификация пользователей.
- Ролевая модель (пользователь/менеджер).
- Кеширование и оптимизация.

## Модели данных

```erDiagram
    Рассылка ||--o{ Попытка_рассылки : "имеет"
    Рассылка }o--|| Сообщение : "использует"
    Рассылка }o--o{ Получатель : "для"
    
    Рассылка {
        datetime время_начала
        datetime время_окончания
        varchar статус
    }
    
    Попытка_рассылки {
        datetime дата_попытки
        varchar статус
        text ответ_сервера
    }
    
    Сообщение {
        varchar тема
        text тело
    }
    
    Получатель {
        varchar email
        varchar ФИО
        text комментарий
    }
```

## Структура проекта

```text
.
├── config/                                 # Настройки Django (основной пакет)
│   ├── __init__.py
│   ├── asgi.py
│   ├── settings.py                         # Основные настройки проекта
│   ├── urls.py                             # Главные URL-маршруты
│   └── wsgi.py
│
├── fixtures/                               # Фикстуры для тестовых данных
├── media/                                  # Медиафайлы для проекта
│
├── newsletters/                            # Приложение рассылок
│   ├── management/
│   │   └── commands/        
│   │       ├── __init__.py
│   │       └── send_newsletter.py          # Кастомная команда отправки рассылки
│   │
│   ├── migrations/                         # Миграции БД
│   ├── templates/                          # Шаблоны приложения
│   │   ├── newsletters/
│   │   │   ├── includes/                   # Подключаемые части шаблонов
│   │   │   ├── message/                    # Шаблоны модели письма
│   │   │   ├── newsletter/                 # Шаблоны модели рассылки
│   │   │   ├── recipient/                  # Шаблоны модели клиента
│   │   ├── base.html                       # Базовый шаблон
│   │   ├── home.html                       # Шаблон главной страницы
│   │   ├── newsletter_attempt_detail.html  # Шаблон модели попытки рассылок
│   │   └── newsletter_attempt_list.html    # Шаблон модели попытки рассылок
│   │
│   ├── __init__.py
│   ├── admin.py                            # Админ-панель
│   ├── apps.py
│   ├── forms.py                            # Формы Django
│   ├── models.py                           # Модели БД
│   ├── services.py                         # Сервисная прослойка
│   ├── tests.py
│   ├── urls.py                             # URL-маршруты приложения
│   └── views.py                            # Контроллеры
│
├── users/                                  # Приложение пользователей
│   ├── management/
│   │   └── commands/        
│   │       ├── __init__.py
│   │       └── send_newsletter.py          # Кастомная команда отправки рассылки
│   │
│   ├── templates/                          # Шаблоны модели пользователя
│   │   └── users/
│   │       └── login.html
│   ├── __init__.py
│   ├── admin.py
│   ├── apps.py
│   ├── forms.py
│   ├── models.py
│   ├── tests.py
│   ├── urls.py
│   └── views.py
│
├── static/                  # Статические файлы
├── .env.sample              # Шаблон для .env
├── .gitignore               # Игнорируемые файлы
├── manage.py                # Скрипт управления Django
├── poetry.lock              # Точные версии зависимостей (генерируется Poetry)
├── pyproject.toml           # Конфигурация Poetry и зависимостей
└── README.md                # Документация проекта
```

## Автор
- Андропов Артем Александрович
- line.adsa@bk.ru